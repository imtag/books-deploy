import{_ as s,c as a,o as n,d as l}from"./app.c4f45da1.js";const A=JSON.parse('{"title":"Vuex \u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528 Vuex","slug":"\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528-vuex","link":"#\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528-vuex","children":[]},{"level":2,"title":"\u5B89\u88C5","slug":"\u5B89\u88C5","link":"#\u5B89\u88C5","children":[]},{"level":2,"title":"Store","slug":"store","link":"#store","children":[{"level":3,"title":"\u6570\u636E\u7684\u54CD\u5E94\u5F0F\u5316","slug":"\u6570\u636E\u7684\u54CD\u5E94\u5F0F\u5316","link":"#\u6570\u636E\u7684\u54CD\u5E94\u5F0F\u5316","children":[]},{"level":3,"title":"commit","slug":"commit","link":"#commit","children":[]},{"level":3,"title":"dispatch","slug":"dispatch","link":"#dispatch","children":[]}]},{"level":2,"title":"\u6700\u540E","slug":"\u6700\u540E","link":"#\u6700\u540E","children":[]}],"relativePath":"Vue.js/\u5256\u6790 Vue.js \u5185\u90E8\u8FD0\u884C\u673A\u5236/Vuex \u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406.md"}'),p={name:"Vue.js/\u5256\u6790 Vue.js \u5185\u90E8\u8FD0\u884C\u673A\u5236/Vuex \u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406.md"},o=l(`<h1 id="vuex-\u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406" tabindex="-1">Vuex \u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406 <a class="header-anchor" href="#vuex-\u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406" aria-hidden="true">#</a></h1><hr><h1 id="vuex-\u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406-1" tabindex="-1">Vuex \u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406 <a class="header-anchor" href="#vuex-\u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406-1" aria-hidden="true">#</a></h1><h2 id="\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528-vuex" tabindex="-1">\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528 Vuex <a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528-vuex" aria-hidden="true">#</a></h2><p>\u5F53\u6211\u4EEC\u4F7F\u7528 Vue.js \u6765\u5F00\u53D1\u4E00\u4E2A\u5355\u9875\u5E94\u7528\u65F6\uFF0C\u7ECF\u5E38\u4F1A\u9047\u5230\u4E00\u4E9B\u7EC4\u4EF6\u95F4\u5171\u4EAB\u7684\u6570\u636E\u6216\u72B6\u6001\uFF0C\u6216\u662F\u9700\u8981\u901A\u8FC7 props \u6DF1\u5C42\u4F20\u9012\u7684\u4E00\u4E9B\u6570\u636E\u3002\u5728\u5E94\u7528\u89C4\u6A21\u8F83\u5C0F\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528 props\u3001\u4E8B\u4EF6\u7B49\u5E38\u7528\u7684\u7236\u5B50\u7EC4\u4EF6\u7684\u7EC4\u4EF6\u95F4\u901A\u4FE1\u65B9\u6CD5\uFF0C\u6216\u8005\u662F\u901A\u8FC7\u4E8B\u4EF6\u603B\u7EBF\u6765\u8FDB\u884C\u4EFB\u610F\u4E24\u4E2A\u7EC4\u4EF6\u7684\u901A\u4FE1\u3002\u4F46\u662F\u5F53\u5E94\u7528\u9010\u6E10\u590D\u6742\u540E\uFF0C\u95EE\u9898\u5C31\u5F00\u59CB\u51FA\u73B0\u4E86\uFF0C\u8FD9\u6837\u7684\u901A\u4FE1\u65B9\u5F0F\u4F1A\u5BFC\u81F4\u6570\u636E\u6D41\u5F02\u5E38\u5730\u6DF7\u4E71\u3002</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/2/9/1617a011064cc43e~tplv-t2oaga2asx-image.image" alt=""></p><p>\u8FD9\u4E2A\u65F6\u5019\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u7528\u5230\u6211\u4EEC\u7684\u72B6\u6001\u7BA1\u7406\u5DE5\u5177 Vuex \u4E86\u3002Vuex \u662F\u4E00\u4E2A\u4E13\u95E8\u4E3A Vue.js \u6846\u67B6\u8BBE\u8BA1\u7684\u3001\u4E13\u95E8\u7528\u6765\u5BF9\u4E8E Vue.js \u5E94\u7528\u8FDB\u884C\u72B6\u6001\u7BA1\u7406\u7684\u5E93\u3002\u5B83\u501F\u9274\u4E86 Flux\u3001redux \u7684\u57FA\u672C\u601D\u60F3\uFF0C\u5C06\u72B6\u6001\u62BD\u79BB\u5230\u5168\u5C40\uFF0C\u5F62\u6210\u4E00\u4E2A Store\u3002\u56E0\u4E3A Vuex \u5185\u90E8\u91C7\u7528\u4E86 new Vue \u6765\u5C06 Store \u5185\u7684\u6570\u636E\u8FDB\u884C\u300C\u54CD\u5E94\u5F0F\u5316\u300D\uFF0C\u6240\u4EE5 Vuex \u662F\u4E00\u6B3E\u5229\u7528 Vue \u5185\u90E8\u673A\u5236\u7684\u5E93\uFF0C\u4E0E Vue \u9AD8\u5EA6\u5951\u5408\uFF0C\u4E0E Vue \u642D\u914D\u4F7F\u7528\u663E\u5F97\u66F4\u52A0\u7B80\u5355\u9AD8\u6548\uFF0C\u4F46\u7F3A\u70B9\u662F\u4E0D\u80FD\u4E0E\u5176\u4ED6\u7684\u6846\u67B6\uFF08\u5982 react\uFF09\u914D\u5408\u4F7F\u7528\u3002</p><p>\u672C\u8282\u5C06\u7B80\u5355\u4ECB\u7ECD Vuex \u6700\u6838\u5FC3\u7684\u5185\u90E8\u673A\u5236\uFF0C\u8D77\u4E2A\u629B\u7816\u5F15\u7389\u7684\u4F5C\u7528\uFF0C\u60F3\u4E86\u89E3\u66F4\u591A\u7EC6\u8282\u53EF\u4EE5\u53C2\u8003\u7B14\u8005 <a href="https://github.com/answershuto" target="_blank" rel="noreferrer">Github</a> \u4E0A\u7684\u53E6\u4E00\u7BC7\u6587\u7AE0 <a href="https://github.com/answershuto/learnVue/blob/master/docs/Vuex%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.MarkDown" target="_blank" rel="noreferrer">\u300AVuex\u6E90\u7801\u89E3\u6790\u300B</a>\u6216\u8005\u76F4\u63A5\u9605\u8BFB <a href="https://github.com/vuejs/vuex" target="_blank" rel="noreferrer">Vuex\u6E90\u7801</a>\u3002</p><h2 id="\u5B89\u88C5" tabindex="-1">\u5B89\u88C5 <a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a></h2><p>Vue.js \u63D0\u4F9B\u4E86\u4E00\u4E2A <code>Vue.use</code> \u7684\u65B9\u6CD5\u6765\u5B89\u88C5\u63D2\u4EF6\uFF0C\u5185\u90E8\u4F1A\u8C03\u7528\u63D2\u4EF6\u63D0\u4F9B\u7684 <code>install</code> \u65B9\u6CD5\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#A6ACCD;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(Vuex)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6240\u4EE5\u6211\u4EEC\u7684\u63D2\u4EF6\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A <code>install</code> \u65B9\u6CD5\u6765\u5B89\u88C5\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> Vue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">install</span><span style="color:#A6ACCD;"> (_Vue) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    Vue.mixin({ </span><span style="color:#F07178;">beforeCreate</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> vuexInit </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    Vue </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> _Vue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u91C7\u7528 <code>Vue.mixin</code> \u65B9\u6CD5\u5C06 <code>vuexInit</code> \u65B9\u6CD5\u6DF7\u6DC6\u8FDB <code>beforeCreate</code> \u94A9\u5B50\u4E2D\uFF0C\u5E76\u7528 <code>Vue</code> \u4FDD\u5B58 Vue \u5BF9\u8C61\u3002\u90A3\u4E48 <code>vuexInit</code> \u7A76\u7ADF\u5B9E\u73B0\u4E86\u4EC0\u4E48\u5462\uFF1F</p><p>\u6211\u4EEC\u77E5\u9053\uFF0C\u5728\u4F7F\u7528 Vuex \u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u5C06 <code>store</code> \u4F20\u5165\u5230 Vue \u5B9E\u4F8B\u4E2D\u53BB\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#676E95;">/*\u5C06store\u653E\u5165Vue\u521B\u5EFA\u65F6\u7684option\u4E2D*/</span></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">el</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    store</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\u6211\u4EEC\u5374\u5728\u6BCF\u4E00\u4E2A vm \u4E2D\u90FD\u53EF\u4EE5\u8BBF\u95EE\u8BE5 <code>store</code>\uFF0C\u8FD9\u4E2A\u5C31\u9700\u8981\u9760 <code>vuexInit</code> \u4E86\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vuexInit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$options</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$store</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$store</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$store</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u56E0\u4E3A\u4E4B\u524D\u5DF2\u7ECF\u7528<code>Vue.mixin</code> \u65B9\u6CD5\u5C06 <code>vuexInit</code> \u65B9\u6CD5\u6DF7\u6DC6\u8FDB <code>beforeCreate</code> \u94A9\u5B50\u4E2D\uFF0C\u6240\u4EE5\u6BCF\u4E00\u4E2A vm \u5B9E\u4F8B\u90FD\u4F1A\u8C03\u7528 <code>vuexInit</code> \u65B9\u6CD5\u3002</p><p>\u5982\u679C\u662F\u6839\u8282\u70B9\uFF08<code>$options</code>\u4E2D\u5B58\u5728 <code>store</code> \u8BF4\u660E\u662F\u6839\u8282\u70B9\uFF09\uFF0C\u5219\u76F4\u63A5\u5C06 <code>options.store</code> \u8D4B\u503C\u7ED9 <code>this.$store</code>\u3002\u5426\u5219\u5219\u8BF4\u660E\u4E0D\u662F\u6839\u8282\u70B9\uFF0C\u4ECE\u7236\u8282\u70B9\u7684 <code>$store</code> \u4E2D\u83B7\u53D6\u3002</p><p>\u901A\u8FC7\u8FD9\u6B65\u7684\u64CD\u4F5C\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u53EF\u4EE5\u5728\u4EFB\u610F\u4E00\u4E2A vm \u4E2D\u901A\u8FC7 <code>this.$store</code> \u6765\u8BBF\u95EE <code>Store</code> \u7684\u5B9E\u4F8B\u5566\uFF5E</p><h2 id="store" tabindex="-1">Store <a class="header-anchor" href="#store" aria-hidden="true">#</a></h2><h3 id="\u6570\u636E\u7684\u54CD\u5E94\u5F0F\u5316" tabindex="-1">\u6570\u636E\u7684\u54CD\u5E94\u5F0F\u5316 <a class="header-anchor" href="#\u6570\u636E\u7684\u54CD\u5E94\u5F0F\u5316" aria-hidden="true">#</a></h3><p>\u9996\u5148\u6211\u4EEC\u9700\u8981\u5728 <code>Store</code> \u7684\u6784\u9020\u51FD\u6570\u4E2D\u5BF9 <code>state</code> \u8FDB\u884C\u300C\u54CD\u5E94\u5F0F\u5316\u300D\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#82AAFF;">constructor</span><span style="color:#A6ACCD;"> () </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_vm</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            ?state</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u719F\u6089\u300C\u54CD\u5E94\u5F0F\u300D\u7684\u540C\u5B66\u80AF\u5B9A\u77E5\u9053\uFF0C\u8FD9\u4E2A\u6B65\u9AA4\u4EE5\u540E\uFF0C<code>state</code> \u4F1A\u5C06\u9700\u8981\u7684\u4F9D\u8D56\u6536\u96C6\u5728 <code>Dep</code> \u4E2D\uFF0C\u5728\u88AB\u4FEE\u6539\u65F6\u66F4\u65B0\u5BF9\u5E94\u89C6\u56FE\u3002\u6211\u4EEC\u6765\u770B\u4E00\u4E2A\u5C0F\u4F8B\u5B50\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> globalData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">d</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            ?state</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">globalData</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* modify */</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">globalData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hi~</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">globalData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> globalData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4EFB\u610F\u6A21\u677F\u4E2D</p><div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre><code><span class="line"><span style="color:#A6ACCD;">&lt;div&gt;{{globalData.d}}&lt;/div&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u8FF0\u4EE3\u7801\u5728\u5168\u5C40\u6709\u4E00\u4E2A <code>globalData</code>\uFF0C\u5B83\u88AB\u4F20\u5165\u4E00\u4E2A <code>Vue</code> \u5BF9\u8C61\u7684 <code>data</code> \u4E2D\uFF0C\u4E4B\u540E\u5728\u4EFB\u610F Vue \u6A21\u677F\u4E2D\u5BF9\u8BE5\u53D8\u91CF\u8FDB\u884C\u5C55\u793A\uFF0C\u56E0\u4E3A\u6B64\u65F6 <code>globalData</code> \u5DF2\u7ECF\u5728 Vue \u7684 <code>prototype</code> \u4E0A\u4E86\u6240\u4EE5\u76F4\u63A5\u901A\u8FC7 <code>this.prototype</code> \u8BBF\u95EE\uFF0C\u4E5F\u5C31\u662F\u5728\u6A21\u677F\u4E2D\u7684 <code>\\{\\{globalData.d\\}\\}</code>\u3002\u6B64\u65F6\uFF0C<code>setTimeout</code> \u5728 1s \u4E4B\u540E\u5C06 <code>globalData.d</code> \u8FDB\u884C\u4FEE\u6539\uFF0C\u6211\u4EEC\u53D1\u73B0\u6A21\u677F\u4E2D\u7684 <code>globalData.d</code> \u53D1\u751F\u4E86\u53D8\u5316\u3002\u5176\u5B9E\u4E0A\u8FF0\u90E8\u5206\u5C31\u662F Vuex \u4F9D\u8D56 Vue \u6838\u5FC3\u5B9E\u73B0\u6570\u636E\u7684\u201C\u54CD\u5E94\u5F0F\u5316\u201D\u3002</p><p>\u8BB2\u5B8C\u4E86 Vuex \u6700\u6838\u5FC3\u7684\u901A\u8FC7 Vue \u8FDB\u884C\u6570\u636E\u7684\u300C\u54CD\u5E94\u5F0F\u5316\u300D\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u518D\u6765\u4ECB\u7ECD\u4E24\u4E2A <code>Store</code> \u7684 API\u3002</p><h3 id="commit" tabindex="-1">commit <a class="header-anchor" href="#commit" aria-hidden="true">#</a></h3><p>\u9996\u5148\u662F <code>commit</code> \u65B9\u6CD5\uFF0C\u6211\u4EEC\u77E5\u9053 <code>commit</code> \u65B9\u6CD5\u662F\u7528\u6765\u89E6\u53D1 <code>mutation</code> \u7684\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#82AAFF;">commit</span><span style="color:#A6ACCD;"> (type</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> payload</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _options) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_mutations</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">commitIterator</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">handler</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">handler</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">payload</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4ECE <code>_mutations</code> \u4E2D\u53D6\u51FA\u5BF9\u5E94\u7684 mutation\uFF0C\u5FAA\u73AF\u6267\u884C\u5176\u4E2D\u7684\u6BCF\u4E00\u4E2A mutation\u3002</p><h3 id="dispatch" tabindex="-1">dispatch <a class="header-anchor" href="#dispatch" aria-hidden="true">#</a></h3><p><code>dispatch</code> \u540C\u6837\u9053\u7406\uFF0C\u7528\u4E8E\u89E6\u53D1 action\uFF0C\u53EF\u4EE5\u5305\u542B\u5F02\u6B65\u72B6\u6001\u3002</p><div class="language-javascript"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;"> (type</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> payload) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_actions</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">handler</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">handler</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">payload</span><span style="color:#F07178;">)))</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">](</span><span style="color:#A6ACCD;">payload</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u540C\u6837\u7684\uFF0C\u53D6\u51FA <code>_actions</code> \u4E2D\u7684\u6240\u6709\u5BF9\u5E94 action\uFF0C\u5C06\u5176\u6267\u884C\uFF0C\u5982\u679C\u6709\u591A\u4E2A\u5219\u7528 <code>Promise.all</code> \u8FDB\u884C\u5305\u88C5\u3002</p><h2 id="\u6700\u540E" tabindex="-1">\u6700\u540E <a class="header-anchor" href="#\u6700\u540E" aria-hidden="true">#</a></h2><p>\u7406\u89E3 Vuex \u7684\u6838\u5FC3\u5728\u4E8E\u7406\u89E3\u5176\u5982\u4F55\u4E0E Vue \u672C\u8EAB\u7ED3\u5408\uFF0C\u5982\u4F55\u5229\u7528 Vue \u7684\u54CD\u5E94\u5F0F\u673A\u5236\u6765\u5B9E\u73B0\u6838\u5FC3 Store \u7684\u300C\u54CD\u5E94\u5F0F\u5316\u300D\u3002</p><p>Vuex \u672C\u8EAB\u4EE3\u7801\u4E0D\u591A\u4E14\u8BBE\u8BA1\u4F18\u96C5\uFF0C\u975E\u5E38\u503C\u5F97\u4E00\u8BFB\uFF0C\u60F3\u9605\u8BFB\u6E90\u7801\u7684\u540C\u5B66\u8BF7\u770B<a href="https://github.com/vuejs/vuex" target="_blank" rel="noreferrer">Vuex\u6E90\u7801</a>\u3002</p><p>\u6CE8\uFF1A\u672C\u8282\u4EE3\u7801\u53C2\u8003<a href="https://github.com/answershuto/VueDemo/blob/master/%E3%80%8AVuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E3%80%8B.js" target="_blank" rel="noreferrer">\u300AVuex\u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u4F5C\u539F\u7406\u300B</a>\u3002</p>`,43),e=[o];function t(c,r,F,y,D,i){return n(),a("div",null,e)}const C=s(p,[["render",t]]);export{A as __pageData,C as default};
