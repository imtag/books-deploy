import{_ as s,c as e,o as n,d as a}from"./app.e5528619.js";const u=JSON.parse('{"title":"\u62D3\u5C55 9-\u9694\u5899\u6709\u8033 \u2014\u2014 Redis \u5B89\u5168\u901A\u4FE1","description":"","frontmatter":{},"headers":[{"level":2,"title":"spiped \u539F\u7406","slug":"spiped-\u539F\u7406","link":"#spiped-\u539F\u7406","children":[]},{"level":2,"title":"spiped \u4F7F\u7528\u5165\u95E8","slug":"spiped-\u4F7F\u7528\u5165\u95E8","link":"#spiped-\u4F7F\u7528\u5165\u95E8","children":[]},{"level":2,"title":"\u4F5C\u4E1A","slug":"\u4F5C\u4E1A","link":"#\u4F5C\u4E1A","children":[]}],"relativePath":"\u5176\u4ED6/Redis \u6DF1\u5EA6\u5386\u9669\uFF1A\u6838\u5FC3\u539F\u7406\u4E0E\u5E94\u7528\u5B9E\u8DF5/\u62D3\u5C55 9-\u9694\u5899\u6709\u8033 \u2014\u2014 Redis \u5B89\u5168\u901A\u4FE1.md"}'),p={name:"\u5176\u4ED6/Redis \u6DF1\u5EA6\u5386\u9669\uFF1A\u6838\u5FC3\u539F\u7406\u4E0E\u5E94\u7528\u5B9E\u8DF5/\u62D3\u5C55 9-\u9694\u5899\u6709\u8033 \u2014\u2014 Redis \u5B89\u5168\u901A\u4FE1.md"},l=a(`<h1 id="\u62D3\u5C55-9-\u9694\u5899\u6709\u8033-\u2014\u2014-redis-\u5B89\u5168\u901A\u4FE1" tabindex="-1">\u62D3\u5C55 9-\u9694\u5899\u6709\u8033 \u2014\u2014 Redis \u5B89\u5168\u901A\u4FE1 <a class="header-anchor" href="#\u62D3\u5C55-9-\u9694\u5899\u6709\u8033-\u2014\u2014-redis-\u5B89\u5168\u901A\u4FE1" aria-hidden="true">#</a></h1><hr><h1 id="\u62D3\u5C55-9\uFF1A\u9694\u5899\u6709\u8033-\u2014\u2014-redis-\u5B89\u5168\u901A\u4FE1" tabindex="-1">\u62D3\u5C55 9\uFF1A\u9694\u5899\u6709\u8033 \u2014\u2014 Redis \u5B89\u5168\u901A\u4FE1 <a class="header-anchor" href="#\u62D3\u5C55-9\uFF1A\u9694\u5899\u6709\u8033-\u2014\u2014-redis-\u5B89\u5168\u901A\u4FE1" aria-hidden="true">#</a></h1><p>\u60F3\u8C61\u8FD9\u6837\u4E00\u4E2A\u5E94\u7528\u573A\u666F\uFF0C\u516C\u53F8\u6709\u4E24\u4E2A\u673A\u623F\u3002\u56E0\u4E3A\u4E00\u4E2A\u7D27\u6025\u9700\u6C42\uFF0C\u9700\u8981\u8DE8\u673A\u623F\u8BFB\u53D6 Redis \u6570\u636E\u3002\u5E94\u7528\u90E8\u7F72\u5728 A \u673A\u623F\uFF0C\u5B58\u50A8\u90E8\u7F72\u5728 B \u673A\u623F\u3002\u5982\u679C\u4F7F\u7528\u666E\u901A tcp \u76F4\u63A5\u8BBF\u95EE\uFF0C\u56E0\u4E3A\u8DE8\u673A\u623F\u6240\u4EE5\u4F20\u8F93\u6570\u636E\u4F1A\u66B4\u9732\u5728\u516C\u7F51\uFF0C\u8FD9\u975E\u5E38\u4E0D\u5B89\u5168\uFF0C\u5BA2\u6237\u7AEF\u670D\u52A1\u5668\u4EA4\u4E92\u7684\u6570\u636E\u5B58\u5728\u88AB\u7A83\u542C\u7684\u98CE\u9669\u3002</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/7/24/164cb8fec86c373c~tplv-t2oaga2asx-image.image" alt=""></p><p>Redis \u672C\u8EAB\u5E76\u4E0D\u652F\u6301 SSL \u5B89\u5168\u94FE\u63A5\uFF0C\u4E0D\u8FC7\u6709\u4E86 SSL \u4EE3\u7406\u8F6F\u4EF6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8BA9\u901A\u4FE1\u6570\u636E\u900F\u660E\u5730\u5F97\u5230\u52A0\u5BC6\uFF0C\u5C31\u597D\u50CF Redis \u7A7F\u4E0A\u4E86\u4E00\u5C42\u9690\u8EAB\u5916\u5957\u4E00\u6837\u3002spiped \u5C31\u662F\u8FD9\u6837\u7684\u4E00\u6B3E SSL \u4EE3\u7406\u8F6F\u4EF6\uFF0C\u5B83\u662F Redis \u5B98\u65B9\u63A8\u8350\u7684\u4EE3\u7406\u8F6F\u4EF6\u3002</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/7/24/164cbbfbafa6f005~tplv-t2oaga2asx-image.image" alt=""></p><h2 id="spiped-\u539F\u7406" tabindex="-1">spiped \u539F\u7406 <a class="header-anchor" href="#spiped-\u539F\u7406" aria-hidden="true">#</a></h2><p>\u8BA9\u6211\u4EEC\u653E\u5927\u7EC6\u8282\uFF0C\u4ED4\u7EC6\u89C2\u5BDF spiped \u5B9E\u73B0\u539F\u7406\u3002spiped \u4F1A\u5728\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u5404\u542F\u52A8\u4E00\u4E2A spiped \u8FDB\u7A0B\u3002</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/7/24/164cbb6b2ce179eb~tplv-t2oaga2asx-image.image" alt=""></p><p>\u5DE6\u8FB9\u7684 spiped \u8FDB\u7A0B A \u8D1F\u8D23\u63A5\u53D7\u6765\u81EA Redis Client \u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\u6570\u636E\uFF0C\u52A0\u5BC6\u540E\u4F20\u9001\u5230\u53F3\u8FB9\u7684 spiped \u8FDB\u7A0B B\u3002spiped B \u5C06\u63A5\u6536\u5230\u7684\u6570\u636E\u89E3\u5BC6\u540E\u4F20\u9012\u5230 Redis Server\u3002\u7136\u540E Redis Server \u518D\u8D70\u4E00\u4E2A\u53CD\u5411\u7684\u6D41\u7A0B\u5C06\u54CD\u5E94\u56DE\u590D\u7ED9 Redis Client\u3002</p><p>\u6BCF\u4E00\u4E2A spiped \u8FDB\u7A0B\u90FD\u4F1A\u6709\u4E00\u4E2A\u76D1\u542C\u7AEF\u53E3 (server socket) \u7528\u6765\u63A5\u6536\u6570\u636E\uFF0C\u540C\u65F6\u8FD8\u4F1A\u4F5C\u4E3A\u4E00\u4E2A\u5BA2\u6237\u7AEF (socket client) \u5C06\u6570\u636E\u8F6C\u53D1\u5230\u76EE\u6807\u5730\u5740\u3002</p><p>spiped \u8FDB\u7A0B\u9700\u8981\u6210\u5BF9\u51FA\u73B0\uFF0C\u76F8\u4E92\u4E4B\u95F4\u9700\u8981\u4F7F\u7528\u76F8\u540C\u7684\u5171\u4EAB\u5BC6\u94A5\u6765\u52A0\u5BC6\u6D88\u606F\u3002</p><h2 id="spiped-\u4F7F\u7528\u5165\u95E8" tabindex="-1">spiped \u4F7F\u7528\u5165\u95E8 <a class="header-anchor" href="#spiped-\u4F7F\u7528\u5165\u95E8" aria-hidden="true">#</a></h2><p>\u5B89\u88C5 spiped\uFF0C\u6211\u7528\u7684\u662F Mac\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&gt; brew install spiped</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5982\u679C\u662F Linux\uFF0C\u53EF\u4EE5\u4F7F\u7528 apt-get \u6216\u8005 yum \u5B89\u88C5\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&gt; apt-get install spiped</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; yum install spiped</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol><li><pre><code>\u4F7F\u7528 Docker \u542F\u52A8 redis-server\uFF0C\u6CE8\u610F\u8981\u7ED1\u5B9A\u672C\u673A\u7684\u56DE\u73AF\`127.0.0.1\`\uFF1B
</code></pre></li></ol><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&gt; docker run -d -p127.0.0.1:6379:6379 --name redis-server-6379 redis</span></span>
<span class="line"><span style="color:#A6ACCD;">12781661ec47faa8a8a967234365192f4da58070b791262afb8d9f64fce61835</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; docker ps</span></span>
<span class="line"><span style="color:#A6ACCD;">CONTAINER ID        IMAGE               COMMAND                  CREATED                  STATUS              PORTS                      NAMES</span></span>
<span class="line"><span style="color:#A6ACCD;">12781661ec47        redis               &quot;docker-entrypoint.s\u2026&quot;   Less than a second ago   Up 1 second         127.0.0.1:6379-&gt;6379/tcp   redis-server-6379</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="2"><li><pre><code>\u751F\u6210\u968F\u673A\u7684\u5BC6\u94A5\u6587\u4EF6\uFF1B
</code></pre></li></ol><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># \u968F\u673A\u7684 32 \u4E2A\u5B57\u8282</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; dd if=/dev/urandom bs=32 count=1 of=spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;">1+0 records in</span></span>
<span class="line"><span style="color:#A6ACCD;">1+0 records out</span></span>
<span class="line"><span style="color:#A6ACCD;">32 bytes transferred in 0.000079 secs (405492 bytes/sec)</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; ls -l</span></span>
<span class="line"><span style="color:#A6ACCD;">rw-r--r--  1 qianwp  staff  32  7 24 18:13 spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="3"><li><pre><code>\u4F7F\u7528\u5BC6\u94A5\u6587\u4EF6\u542F\u52A8\u670D\u52A1\u5668 spiped \u8FDB\u7A0B\uFF0C\`172.16.128.81\`\u662F\u6211\u672C\u673A\u7684\u516C\u7F51 IP \u5730\u5740\uFF1B
</code></pre></li></ol><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># -d \u8868\u793A decrypt(\u5BF9\u8F93\u5165\u6570\u636E\u8FDB\u884C\u89E3\u5BC6)\uFF0C-s \u4E3A\u6E90\u76D1\u542C\u5730\u5740\uFF0C-t \u4E3A\u8F6C\u53D1\u76EE\u6807\u5730\u5740</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; spiped -d -s &#39;[172.16.128.81]:6479&#39; -t &#39;[127.0.0.1]:6379&#39; -k spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; ps -ef|grep spiped</span></span>
<span class="line"><span style="color:#A6ACCD;">501 30673     1   0  7:29 \u4E0B\u5348 ??         0:00.04 spiped -d -s [172.16.128.81]:6479 -t [127.0.0.1]:6379 -k spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u4E2A spiped \u8FDB\u7A0B\u76D1\u542C\u516C\u7F51 IP \u7684 6479 \u7AEF\u53E3\u63A5\u6536\u516C\u7F51\u4E0A\u7684\u6570\u636E\uFF0C\u5C06\u6570\u636E\u89E3\u5BC6\u540E\u8F6C\u53D1\u5230\u672C\u673A\u56DE\u73AF\u5730\u5740\u7684 6379 \u7AEF\u53E3\uFF0C\u4E5F\u5C31\u662F redis-server \u76D1\u542C\u7684\u7AEF\u53E3\u3002</p><ol start="4"><li><pre><code>\u4F7F\u7528\u5BC6\u94A5\u6587\u4EF6\u542F\u52A8\u5BA2\u6237\u7AEF spiped \u8FDB\u7A0B\uFF0C\`172.16.128.81\`\u662F\u6211\u672C\u673A\u7684\u516C\u7F51 IP \u5730\u5740\uFF1B
</code></pre></li></ol><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># -e \u8868\u793A encrypt\uFF0C\u5BF9\u8F93\u5165\u6570\u636E\u8FDB\u884C\u52A0\u5BC6</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; spiped -e -s &#39;[127.0.0.1]:6579&#39; -t &#39;[172.16.128.81]:6479&#39; -k spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; ps -ef|grep spiped</span></span>
<span class="line"><span style="color:#A6ACCD;">501 30673     1   0  7:29 \u4E0B\u5348 ??         0:00.04 spiped -d -s [172.16.128.81]:6479 -t [127.0.0.1]:6379 -k spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;">501 30696     1   0  7:30 \u4E0B\u5348 ??         0:00.03 spiped -e -s [127.0.0.1]:6579 -t [172.16.128.81]:6479 -k spiped.key</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5BA2\u6237\u7AEF spiped \u8FDB\u7A0B\u76D1\u542C\u4E86\u672C\u5730\u56DE\u73AF\u5730\u5740\u7684 6579 \u7AEF\u53E3\uFF0C\u5C06\u8BE5\u7AEF\u53E3\u4E0A\u6536\u5230\u7684\u6570\u636E\u52A0\u5BC6\u8F6C\u53D1\u5230\u670D\u52A1\u5668 spiped \u8FDB\u7A0B\u3002</p><ol start="5"><li><pre><code>\u542F\u52A8\u5BA2\u6237\u7AEF\u94FE\u63A5\uFF0C\u56E0\u4E3A Docker \u91CC\u9762\u7684\u5BA2\u6237\u7AEF\u4E0D\u597D\u8BBF\u95EE\u5BBF\u4E3B\u673A\u7684\u56DE\u73AF\u5730\u5740\uFF0C\u6240\u4EE5 Redis \u7684\u5BA2\u6237\u7AEF\u6211\u4EEC\u4F7F\u7528 Python \u4EE3\u7801\u6765\u542F\u52A8\uFF1B
</code></pre></li></ol><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&gt;&gt; import redis</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; c=redis.StrictRedis(host=&quot;localhost&quot;, port=6579)</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; c.ping()</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; c.info(&#39;cpu&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">{&#39;used_cpu_sys&#39;: 4.83,</span></span>
<span class="line"><span style="color:#A6ACCD;"> &#39;used_cpu_sys_children&#39;: 0.0,</span></span>
<span class="line"><span style="color:#A6ACCD;"> &#39;used_cpu_user&#39;: 0.93,</span></span>
<span class="line"><span style="color:#A6ACCD;"> &#39;used_cpu_user_children&#39;: 0.0}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u53EF\u4EE5\u770B\u51FA\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u5DF2\u7ECF\u901A\u4E86\uFF0C\u5982\u679C\u6211\u4EEC\u5C1D\u8BD5\u76F4\u63A5\u94FE\u63A5\u670D\u52A1\u5668 spiped \u8FDB\u7A0B (\u52A0\u5BC6\u7684\u7AEF\u53E3 6379)\uFF0C\u770B\u770B\u4F1A\u53D1\u751F\u4EC0\u4E48\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt; import redis</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt; c=redis.StrictRedis(host=&quot;172.16.128.81&quot;, port=6479)</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt; c.ping()</span></span>
<span class="line"><span style="color:#A6ACCD;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/client.py&quot;, line 777, in ping</span></span>
<span class="line"><span style="color:#A6ACCD;">    return self.execute_command(&#39;PING&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/client.py&quot;, line 674, in execute_command</span></span>
<span class="line"><span style="color:#A6ACCD;">    return self.parse_response(connection, command_name, **options)</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/client.py&quot;, line 680, in parse_response</span></span>
<span class="line"><span style="color:#A6ACCD;">    response = connection.read_response()</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/connection.py&quot;, line 624, in read_response</span></span>
<span class="line"><span style="color:#A6ACCD;">    response = self._parser.read_response()</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/connection.py&quot;, line 284, in read_response</span></span>
<span class="line"><span style="color:#A6ACCD;">    response = self._buffer.readline()</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/connection.py&quot;, line 216, in readline</span></span>
<span class="line"><span style="color:#A6ACCD;">    self._read_from_socket()</span></span>
<span class="line"><span style="color:#A6ACCD;">  File &quot;/Users/qianwp/source/animate/juejin-redis/.py/lib/python2.7/site-packages/redis/connection.py&quot;, line 191, in _read_from_socket</span></span>
<span class="line"><span style="color:#A6ACCD;">    (e.args,))</span></span>
<span class="line"><span style="color:#A6ACCD;">redis.exceptions.ConnectionError: Error while reading from socket: (&#39;Connection closed by server.&#39;,)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4ECE\u8F93\u51FA\u4E2D\u53EF\u4EE5\u770B\u51FA\u6765\u8BF7\u6C42\u662F\u53D1\u9001\u8FC7\u53BB\u4E86\uFF0C\u4F46\u662F\u5374\u51FA\u73B0\u4E86\u8BFB\u8D85\u65F6\uFF0C\u8981\u4E48\u662F\u670D\u52A1\u5668\u5728\u9ED8\u8BA4\u7684\u8D85\u65F6\u65F6\u95F4\u5185\u6CA1\u6709\u8FD4\u56DE\u6570\u636E\uFF0C\u8981\u4E48\u662F\u670D\u52A1\u5668\u6CA1\u6709\u8FD4\u56DE\u5BA2\u6237\u7AEF\u60F3\u8981\u7684\u6570\u636E\u3002</p><p>spiped \u53EF\u4EE5\u540C\u65F6\u652F\u6301\u591A\u4E2A\u5BA2\u6237\u7AEF\u94FE\u63A5\u7684\u6570\u636E\u8F6C\u53D1\u5DE5\u4F5C\uFF0C\u5B83\u8FD8\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u6765\u9650\u5B9A\u5141\u8BB8\u7684\u6700\u5927\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\u3002\u4F46\u662F\u5BF9\u4E8E\u670D\u52A1\u5668 spiped\uFF0C\u5B83\u4E0D\u80FD\u540C\u65F6\u652F\u6301\u591A\u4E2A\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u8F6C\u53D1\u3002\u610F\u5473\u7740\u5728\u96C6\u7FA4\u73AF\u5883\u4E0B\uFF0C\u9700\u8981\u4E3A\u6BCF\u4E00\u4E2A server \u8282\u70B9\u542F\u52A8\u4E00\u4E2A spiped \u8FDB\u7A0B\u6765\u4EE3\u6536\u6D88\u606F\uFF0C\u5728\u8FD0\u7EF4\u5B9E\u8DF5\u4E0A\u8FD9\u53EF\u80FD\u4F1A\u6BD4\u8F83\u7E41\u7410\u3002</p><h2 id="\u4F5C\u4E1A" tabindex="-1">\u4F5C\u4E1A <a class="header-anchor" href="#\u4F5C\u4E1A" aria-hidden="true">#</a></h2><p>\u8BF7\u8BFB\u8005\u5C06 Redis \u66FF\u6362\u6210 MySQL \u6765\u4F53\u9A8C\u4E00\u4E0B spiped \u7684\u795E\u5947\u9B54\u529B\u3002</p>`,36),i=[l];function o(t,c,r,d,A,C){return n(),e("div",null,i)}const g=s(p,[["render",o]]);export{u as __pageData,g as default};
