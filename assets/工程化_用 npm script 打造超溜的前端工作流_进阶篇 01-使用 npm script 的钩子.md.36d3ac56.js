import{_ as s,c as n,o as a,d as t}from"./app.c4f45da1.js";const d=JSON.parse('{"title":"\u8FDB\u9636\u7BC7 01-\u4F7F\u7528 npm script \u7684\u94A9\u5B50","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u6539\u9020 test \u547D\u4EE4","slug":"\u6539\u9020-test-\u547D\u4EE4","link":"#\u6539\u9020-test-\u547D\u4EE4","children":[]},{"level":2,"title":"\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6","slug":"\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6","link":"#\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6","children":[]}],"relativePath":"\u5DE5\u7A0B\u5316/\u7528 npm script \u6253\u9020\u8D85\u6E9C\u7684\u524D\u7AEF\u5DE5\u4F5C\u6D41/\u8FDB\u9636\u7BC7 01-\u4F7F\u7528 npm script \u7684\u94A9\u5B50.md"}'),p={name:"\u5DE5\u7A0B\u5316/\u7528 npm script \u6253\u9020\u8D85\u6E9C\u7684\u524D\u7AEF\u5DE5\u4F5C\u6D41/\u8FDB\u9636\u7BC7 01-\u4F7F\u7528 npm script \u7684\u94A9\u5B50.md"},o=t(`<h1 id="\u8FDB\u9636\u7BC7-01-\u4F7F\u7528-npm-script-\u7684\u94A9\u5B50" tabindex="-1">\u8FDB\u9636\u7BC7 01-\u4F7F\u7528 npm script \u7684\u94A9\u5B50 <a class="header-anchor" href="#\u8FDB\u9636\u7BC7-01-\u4F7F\u7528-npm-script-\u7684\u94A9\u5B50" aria-hidden="true">#</a></h1><hr><h1 id="_2-1-\u4F7F\u7528-npm-script-\u7684\u94A9\u5B50" tabindex="-1">2.1 \u4F7F\u7528 npm script \u7684\u94A9\u5B50 <a class="header-anchor" href="#_2-1-\u4F7F\u7528-npm-script-\u7684\u94A9\u5B50" aria-hidden="true">#</a></h1><p>\u4E3A\u4E86\u65B9\u4FBF\u5F00\u53D1\u8005\u81EA\u5B9A\u4E49\uFF0Cnpm script \u7684\u8BBE\u8BA1\u8005\u4E3A\u547D\u4EE4\u7684\u6267\u884C\u589E\u52A0\u4E86\u7C7B\u4F3C\u751F\u547D\u5468\u671F\u7684\u673A\u5236\uFF0C\u5177\u4F53\u6765\u8BF4\u5C31\u662F <code>pre</code> \u548C <code>post</code> \u94A9\u5B50\u811A\u672C\u3002\u8FD9\u79CD\u7279\u6027\u5728\u67D0\u4E9B\u64CD\u4F5C\u524D\u9700\u8981\u505A\u68C0\u67E5\u3001\u67D0\u4E9B\u64CD\u4F5C\u540E\u9700\u8981\u505A\u6E05\u7406\u7684\u60C5\u51B5\u4E0B\u975E\u5E38\u6709\u7528\u3002</p><p>\u4E3E\u4F8B\u6765\u8BF4\uFF0C\u8FD0\u884C npm run test \u7684\u65F6\u5019\uFF0C\u5206 3 \u4E2A\u9636\u6BB5\uFF1A</p><ol><li>\u68C0\u67E5 scripts \u5BF9\u8C61\u4E2D\u662F\u5426\u5B58\u5728 pretest \u547D\u4EE4\uFF0C\u5982\u679C\u6709\uFF0C\u5148\u6267\u884C\u8BE5\u547D\u4EE4\uFF1B</li><li>\u68C0\u67E5\u662F\u5426\u6709 test \u547D\u4EE4\uFF0C\u6709\u7684\u8BDD\u8FD0\u884C test \u547D\u4EE4\uFF0C\u6CA1\u6709\u7684\u8BDD\u62A5\u9519\uFF1B</li><li>\u68C0\u67E5\u662F\u5426\u5B58\u5728 posttest \u547D\u4EE4\uFF0C\u5982\u679C\u6709\uFF0C\u6267\u884C posttest \u547D\u4EE4\uFF1B</li></ol><p>\u5230\u76EE\u524D\u4E3A\u6B62\u6211\u4EEC\u6240\u8986\u76D6\u7684\u524D\u7AEF\u5DE5\u4F5C\u6D41\u5305\u542B\u4E86\u4EE3\u7801\u68C0\u67E5\u548C\u6D4B\u8BD5\u81EA\u52A8\u5316\u8FD0\u884C\u73AF\u8282\uFF0C<strong>\u8861\u91CF\u6D4B\u8BD5\u6548\u679C\u7684\u91CD\u8981\u6307\u6807\u662F\u6D4B\u8BD5\u8986\u76D6\u7387</strong>\uFF0C\u800C\u6536\u96C6\u8986\u76D6\u7387\u4E5F\u975E\u5E38\u7684\u7B80\u5355\uFF0C<strong>\u4E0B\u9762\u9010\u6B65\u8BB2\u89E3\u5982\u4F55\u628A\u4EE3\u7801\u68C0\u67E5\u3001\u6D4B\u8BD5\u8FD0\u884C\u3001\u8986\u76D6\u7387\u6536\u96C6\u8FD9\u4E9B\u6B65\u9AA4\u4E32\u8D77\u6765</strong>\u3002</p><h2 id="\u6539\u9020-test-\u547D\u4EE4" tabindex="-1">\u6539\u9020 test \u547D\u4EE4 <a class="header-anchor" href="#\u6539\u9020-test-\u547D\u4EE4" aria-hidden="true">#</a></h2><p>\u9996\u5148\uFF0C\u6211\u4EEC\u57FA\u4E8E\u94A9\u5B50\u673A\u5236\u5BF9\u73B0\u6709\u7684 scripts \u505A\u4EE5\u4E0B 3 \u70B9\u91CD\u6784\uFF0C\u628A\u4EE3\u7801\u68C0\u67E5\u548C\u6D4B\u8BD5\u8FD0\u884C\u4E32\u8D77\u6765\uFF1A</p><ul><li>\u589E\u52A0\u7B80\u5355\u7684 lint \u547D\u4EE4\uFF0C\u5E76\u884C\u8FD0\u884C\u6240\u6709\u7684 lint \u5B50\u547D\u4EE4\uFF1B</li><li>\u589E\u52A0 pretest \u94A9\u5B50\uFF0C\u5728\u5176\u4E2D\u8FD0\u884C lint \u547D\u4EE4\uFF1B</li><li>\u628A test \u66FF\u6362\u4E3A\u66F4\u7B80\u5355\u7684 <code>mocha tests/</code>\uFF1B</li></ul><p>\u4EE3\u7801 diff \u5982\u4E0B\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">diff --git a/package.json b/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">index 8f67810..d297f2e 100644</span></span>
<span class="line"><span style="color:#A6ACCD;">--- a/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">+++ b/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">@@ -4,13 +4,17 @@</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;lint&quot;: &quot;npm-run-all --parallel lint:*&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;lint:js&quot;: &quot;eslint *.js&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;lint:js:fix&quot;: &quot;npm run lint:js -- --fix&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;lint:css&quot;: &quot;stylelint *.less&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;lint:json&quot;: &quot;jsonlint --quiet *.json&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;lint:markdown&quot;: &quot;markdownlint --config .markdownlint.json *.md&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">-    &quot;mocha&quot;: &quot;mocha tests/&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">-    &quot;test&quot;: &quot;# \u8FD0\u884C\u6240\u6709\u4EE3\u7801\u68C0\u67E5\u548C\u5355\u5143\u6D4B\u8BD5 \\n    npm-run-all --parallel lint:* mocha&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;pretest&quot;: &quot;npm run lint&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;test&quot;: &quot;mocha tests/&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5F53\u6211\u4EEC\u8FD0\u884C npm test \u7684\u65F6\u5019\uFF0C\u4F1A\u5148\u81EA\u52A8\u6267\u884C pretest \u91CC\u9762\u7684 lint\uFF0C\u5B9E\u9645\u8F93\u51FA\u5982\u4E0B\uFF1A</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/11/29/160052621691a0b7~tplv-t2oaga2asx-image.image" alt=""></p><h2 id="\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6" tabindex="-1">\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6 <a class="header-anchor" href="#\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6" aria-hidden="true">#</a></h2><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u628A\u8FD0\u884C\u6D4B\u8BD5\u548C\u8986\u76D6\u7387\u6536\u96C6\u4E32\u8D77\u6765\uFF0C\u5177\u4F53\u505A\u6CD5\u662F\uFF1A\u589E\u52A0\u8986\u76D6\u7387\u6536\u96C6\u7684\u547D\u4EE4\uFF0C\u5E76\u4E14\u8986\u76D6\u7387\u6536\u96C6\u5B8C\u6BD5\u4E4B\u540E\u81EA\u52A8\u6253\u5F00 html \u7248\u672C\u7684\u8986\u76D6\u7387\u62A5\u544A\u3002\u8981\u5B9E\u73B0\u76EE\u6807\uFF0C\u6211\u4EEC\u9700\u8981\u5F15\u5165\u4E24\u4E2A\u65B0\u5DE5\u5177\uFF1A</p><ol><li>\u8986\u76D6\u7387\u6536\u96C6\u5DE5\u5177 <a href="https://github.com/istanbuljs/nyc" target="_blank" rel="noreferrer">nyc</a>\uFF0C\u662F\u8986\u76D6\u7387\u6536\u96C6\u5DE5\u5177 <a href="https://istanbul.js.org" target="_blank" rel="noreferrer">istanbul</a> \u7684\u547D\u4EE4\u884C\u7248\u672C\uFF0Cistanbul \u652F\u6301\u751F\u6210\u5404\u79CD\u683C\u5F0F\u7684\u8986\u76D6\u7387\u62A5\u544A\uFF0C\u6211\u5DF2\u7ECF\u4F7F\u7528\u591A\u5E74\uFF1B</li><li>\u6253\u5F00 html \u6587\u4EF6\u7684\u5DE5\u5177 <a href="https://github.com/sindresorhus/opn-cli" target="_blank" rel="noreferrer">opn-cli</a>\uFF0C\u662F\u80FD\u591F\u6253\u5F00\u4EFB\u610F\u7A0B\u5E8F\u7684\u5DE5\u5177 <a href="https://github.com/sindresorhus/opn" target="_blank" rel="noreferrer">opn</a> \u7684\u547D\u4EE4\u884C\u7248\u672C\uFF0C\u4F5C\u8005\u662F\b\u524D\u7AEF\u793E\u533A\u975E\u5E38\u9AD8\u4EA7\u7684 <a href="https://github.com/sindresorhus" target="_blank" rel="noreferrer">Sindre Sorhus</a>\uFF0C\u5B83\u5728 npm \u4E0A\u53D1\u5E03\u4E86\u8D85\u8FC7 1000 \u4E2A\u5305\uFF0C\u5E76\u4E14\u8D28\u91CF\u90FD\u5F88\u4E0D\u9519\u3002</li></ol><p>\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4\u5B89\u88C5\u4F9D\u8D56\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm i nyc opn-cli -D</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7136\u540E\u5728 package.json \u589E\u52A0 nyc \u7684\u914D\u7F6E\uFF0C\u544A\u8BC9 nyc \u8BE5\u5FFD\u7565\u54EA\u4E9B\u6587\u4EF6\u3002\u6700\u540E\u662F\u5728 scripts \u4E2D\u65B0\u589E 3 \u6761\u547D\u4EE4\uFF1A</p><ol><li>precover\uFF0C\u6536\u96C6\u8986\u76D6\u7387\u4E4B\u524D\u628A\u4E4B\u524D\u7684\u8986\u76D6\u7387\u62A5\u544A\u76EE\u5F55\u6E05\u7406\u6389\uFF1B</li><li>cover\uFF0C\u76F4\u63A5\u8C03\u7528 nyc\uFF0C\u8BA9\u5176\u751F\u6210 html \u683C\u5F0F\u7684\u8986\u76D6\u7387\u62A5\u544A\uFF1B</li><li>postcover\uFF0C\u6E05\u7406\u6389\u4E34\u65F6\u6587\u4EF6\uFF0C\u5E76\u4E14\u5728\u6D4F\u89C8\u5668\u4E2D\u9884\u89C8\u8986\u76D6\u7387\u62A5\u544A\uFF1B</li></ol><p>\u5177\u4F53 diff \u5982\u4E0B\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">diff --git a/package.json b/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">index 8f67810..d297f2e 100644</span></span>
<span class="line"><span style="color:#A6ACCD;">--- a/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">+++ b/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">@@ -4,13 +4,17 @@</span></span>
<span class="line"><span style="color:#A6ACCD;">   scripts: {</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;precover&quot;: &quot;rm -rf coverage&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;cover&quot;: &quot;nyc --reporter=html npm test&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;postcover&quot;: &quot;rm -rf .nyc_output &amp;&amp; opn coverage/index.html&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   },</span></span>
<span class="line"><span style="color:#A6ACCD;">@@ -22,7 +26,15 @@</span></span>
<span class="line"><span style="color:#A6ACCD;">   &quot;devDependencies&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;npm-run-all&quot;: &quot;^4.1.2&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;nyc&quot;: &quot;^11.3.0&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;opn-cli&quot;: &quot;^3.1.0&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;stylelint&quot;: &quot;^8.2.0&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">     &quot;stylelint-config-standard&quot;: &quot;^17.0.0&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">+  },</span></span>
<span class="line"><span style="color:#A6ACCD;">+  &quot;nyc&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">+    &quot;exclude&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">+      &quot;**/*.spec.js&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">+      &quot;.*.js&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">+    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">   }</span></span>
<span class="line"><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6539\u5B8C\u4E4B\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C npm run cover\uFF0C\u8FD0\u884C\u7684\u8BE6\u7EC6\u622A\u56FE\u5982\u4E0B\uFF1A</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/11/29/16005264d5d3aef6~tplv-t2oaga2asx-image.image" alt=""></p><blockquote><p><strong>TIP#7</strong>\uFF1A\u5230\u76EE\u524D\u4E3A\u6B62\uFF0C\u6211\u4EEC\u7684\u5DE5\u4F5C\u6D41\u4E2D\u5DF2\u7ECF\u5305\u542B\u4EE3\u7801\u68C0\u67E5\u3001\u6D4B\u8BD5\u8FD0\u884C\u3001\u8986\u76D6\u7387\u6536\u96C6\u3001\u8986\u76D6\u7387\u67E5\u770B\u7B49\u529F\u80FD\uFF0C\u4F60\u662F\u4E0D\u662F\u53EF\u4EE5\u7528\u6765\u6539\u8FDB\u4E0B\u81EA\u5DF1\u7684\u5DE5\u4F5C\u6D41\u5462\uFF1F</p></blockquote><hr><blockquote><p>\u672C\u8282\u7528\u5230\u7684\u4EE3\u7801\u89C1 <a href="https://github.com/wangshijun/automated-workflow-with-npm-script/tree/04-pre-and-post-hooks" target="_blank" rel="noreferrer">GitHub</a>\uFF0C\u60F3\u8FB9\u770B\u8FB9\u52A8\u624B\u7EC3\u4E60\u7684\u540C\u5B66\u53EF\u4EE5\u62C9\u4E0B\u6765\u81EA\u5DF1\u6539\uFF0C\u6CE8\u610F\u5207\u6362\u5230\u6B63\u786E\u7684\u5206\u652F <code>04-pre-and-post-hooks</code>\u3002</p></blockquote><hr>`,29),l=[o];function e(c,r,i,u,A,C){return a(),n("div",null,l)}const h=s(p,[["render",e]]);export{d as __pageData,h as default};
