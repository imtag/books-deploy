import{_ as s,c as a,o as n,d as l}from"./app.c4f45da1.js";const y=JSON.parse('{"title":"\u62D3\u5C55 11-\u77ED\u5C0F\u7CBE\u608D \u2014\u2014 \u547D\u4EE4\u884C\u5DE5\u5177\u7684\u5999\u7528","description":"","frontmatter":{},"headers":[{"level":3,"title":"\u6267\u884C\u5355\u6761\u547D\u4EE4","slug":"\u6267\u884C\u5355\u6761\u547D\u4EE4","link":"#\u6267\u884C\u5355\u6761\u547D\u4EE4","children":[]},{"level":3,"title":"\u6279\u91CF\u6267\u884C\u547D\u4EE4","slug":"\u6279\u91CF\u6267\u884C\u547D\u4EE4","link":"#\u6279\u91CF\u6267\u884C\u547D\u4EE4","children":[]},{"level":3,"title":"set \u591A\u884C\u5B57\u7B26\u4E32","slug":"set-\u591A\u884C\u5B57\u7B26\u4E32","link":"#set-\u591A\u884C\u5B57\u7B26\u4E32","children":[]},{"level":3,"title":"\u91CD\u590D\u6267\u884C\u6307\u4EE4","slug":"\u91CD\u590D\u6267\u884C\u6307\u4EE4","link":"#\u91CD\u590D\u6267\u884C\u6307\u4EE4","children":[]},{"level":3,"title":"\u5BFC\u51FA csv","slug":"\u5BFC\u51FA-csv","link":"#\u5BFC\u51FA-csv","children":[]},{"level":3,"title":"\u6267\u884C lua \u811A\u672C","slug":"\u6267\u884C-lua-\u811A\u672C","link":"#\u6267\u884C-lua-\u811A\u672C","children":[]},{"level":3,"title":"\u76D1\u63A7\u670D\u52A1\u5668\u72B6\u6001","slug":"\u76D1\u63A7\u670D\u52A1\u5668\u72B6\u6001","link":"#\u76D1\u63A7\u670D\u52A1\u5668\u72B6\u6001","children":[]},{"level":3,"title":"\u626B\u63CF\u5927 KEY","slug":"\u626B\u63CF\u5927-key","link":"#\u626B\u63CF\u5927-key","children":[]},{"level":3,"title":"\u91C7\u6837\u670D\u52A1\u5668\u6307\u4EE4","slug":"\u91C7\u6837\u670D\u52A1\u5668\u6307\u4EE4","link":"#\u91C7\u6837\u670D\u52A1\u5668\u6307\u4EE4","children":[]},{"level":3,"title":"\u8BCA\u65AD\u670D\u52A1\u5668\u65F6\u5EF6","slug":"\u8BCA\u65AD\u670D\u52A1\u5668\u65F6\u5EF6","link":"#\u8BCA\u65AD\u670D\u52A1\u5668\u65F6\u5EF6","children":[]},{"level":3,"title":"\u8FDC\u7A0B rdb \u5907\u4EFD","slug":"\u8FDC\u7A0B-rdb-\u5907\u4EFD","link":"#\u8FDC\u7A0B-rdb-\u5907\u4EFD","children":[]},{"level":3,"title":"\u6A21\u62DF\u4ECE\u5E93","slug":"\u6A21\u62DF\u4ECE\u5E93","link":"#\u6A21\u62DF\u4ECE\u5E93","children":[]}],"relativePath":"\u5176\u4ED6/Redis \u6DF1\u5EA6\u5386\u9669\uFF1A\u6838\u5FC3\u539F\u7406\u4E0E\u5E94\u7528\u5B9E\u8DF5/\u62D3\u5C55 11-\u77ED\u5C0F\u7CBE\u608D \u2014\u2014 \u547D\u4EE4\u884C\u5DE5\u5177\u7684\u5999\u7528.md"}'),e={name:"\u5176\u4ED6/Redis \u6DF1\u5EA6\u5386\u9669\uFF1A\u6838\u5FC3\u539F\u7406\u4E0E\u5E94\u7528\u5B9E\u8DF5/\u62D3\u5C55 11-\u77ED\u5C0F\u7CBE\u608D \u2014\u2014 \u547D\u4EE4\u884C\u5DE5\u5177\u7684\u5999\u7528.md"},p=l(`<h1 id="\u62D3\u5C55-11-\u77ED\u5C0F\u7CBE\u608D-\u2014\u2014-\u547D\u4EE4\u884C\u5DE5\u5177\u7684\u5999\u7528" tabindex="-1">\u62D3\u5C55 11-\u77ED\u5C0F\u7CBE\u608D \u2014\u2014 \u547D\u4EE4\u884C\u5DE5\u5177\u7684\u5999\u7528 <a class="header-anchor" href="#\u62D3\u5C55-11-\u77ED\u5C0F\u7CBE\u608D-\u2014\u2014-\u547D\u4EE4\u884C\u5DE5\u5177\u7684\u5999\u7528" aria-hidden="true">#</a></h1><hr><p>\u6211\u4EEC\u5929\u5929\u90FD\u5728\u4F7F\u7528 Redis \u5185\u7F6E\u7684\u547D\u4EE4\u884C\u5DE5\u5177 redis-cli\uFF0C\u4E45\u800C\u4E45\u4E4B\u4EE5\u4E3A\u5B83\u5C31\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u4EA4\u4E92\u5F0F Redis \u6570\u636E\u7ED3\u6784\u624B\u5DE5\u64CD\u4F5C\u7A0B\u5E8F\uFF0C\u4F46\u662F\u5B83\u80CC\u540E\u5F3A\u5927\u7684\u529F\u80FD\u7EDD\u5927\u591A\u6570\u540C\u5B66\u53EF\u80FD\u95FB\u6240\u672A\u95FB\u3002\u672C\u8282\u6211\u4EEC\u4E00\u8D77\u6765\u6316\u6398\u8FD9\u4E9B\u9C9C\u4E3A\u4EBA\u77E5\u7684\u6709\u8DA3\u7528\u6CD5\u3002</p><h3 id="\u6267\u884C\u5355\u6761\u547D\u4EE4" tabindex="-1">\u6267\u884C\u5355\u6761\u547D\u4EE4 <a class="header-anchor" href="#\u6267\u884C\u5355\u6761\u547D\u4EE4" aria-hidden="true">#</a></h3><p>\u5E73\u65F6\u5728\u8BBF\u95EE Redis \u670D\u52A1\u5668\uFF0C\u4E00\u822C\u90FD\u4F1A\u4F7F\u7528 redis-cli \u8FDB\u5165\u4EA4\u4E92\u6A21\u5F0F\uFF0C\u7136\u540E\u4E00\u95EE\u4E00\u7B54\u6765\u8BFB\u5199\u670D\u52A1\u5668\uFF0C\u8FD9\u79CD\u60C5\u51B5\u4E0B\u6211\u4EEC\u4F7F\u7528\u7684\u662F\u5B83\u7684\u300C\u4EA4\u4E92\u6A21\u5F0F\u300D\u3002\u8FD8\u6709\u53E6\u5916\u4E00\u79CD\u300C\u76F4\u63A5\u6A21\u5F0F\u300D\uFF0C\u901A\u8FC7\u5C06\u547D\u4EE4\u53C2\u6570\u76F4\u63A5\u4F20\u9012\u7ED9 redis-cli \u6765\u6267\u884C\u6307\u4EE4\u5E76\u83B7\u53D6\u8F93\u51FA\u7ED3\u679C\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli incrby foo 5</span></span>
<span class="line"><span style="color:#A6ACCD;">(integer) 5</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli incrby foo 5</span></span>
<span class="line"><span style="color:#A6ACCD;">(integer) 10</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5982\u679C\u8F93\u51FA\u7684\u5185\u5BB9\u8F83\u5927\uFF0C\u8FD8\u53EF\u4EE5\u5C06\u8F93\u51FA\u91CD\u5B9A\u5411\u5230\u5916\u90E8\u6587\u4EF6</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli info &gt; info.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">$ wc -l info.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">\xA0 \xA0 \xA0120 info.txt</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E0A\u9762\u7684\u547D\u4EE4\u6307\u5411\u7684\u670D\u52A1\u5668\u662F\u9ED8\u8BA4\u670D\u52A1\u5668\u5730\u5740\uFF0C\u5982\u679C\u60F3\u6307\u5411\u7279\u5B9A\u7684\u670D\u52A1\u5668\u53EF\u4EE5\u8FD9\u6837</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">// -n 2 \u8868\u793A\u4F7F\u7528\u7B2C2\u4E2A\u5E93\uFF0C\u76F8\u5F53\u4E8E select 2</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli -h localhost -p 6379 -n 2 ping</span></span>
<span class="line"><span style="color:#A6ACCD;">PONG</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u6279\u91CF\u6267\u884C\u547D\u4EE4" tabindex="-1">\u6279\u91CF\u6267\u884C\u547D\u4EE4 <a class="header-anchor" href="#\u6279\u91CF\u6267\u884C\u547D\u4EE4" aria-hidden="true">#</a></h3><p>\u5728\u5E73\u65F6\u7EBF\u4E0A\u7684\u5F00\u53D1\u8FC7\u7A0B\u4E2D\uFF0C\u6709\u65F6\u5019\u6211\u4EEC\u514D\u4E0D\u4E86\u8981\u624B\u5DE5\u9020\u6570\u636E\uFF0C\u7136\u540E\u5BFC\u5165 Redis\u3002\u901A\u5E38\u6211\u4EEC\u4F1A\u7F16\u5199\u811A\u672C\u7A0B\u5E8F\u6765\u505A\u8FD9\u4EF6\u4E8B\u3002\u4E0D\u8FC7\u8FD8\u6709\u53E6\u5916\u4E00\u79CD\u6BD4\u8F83\u4FBF\u6377\u7684\u65B9\u5F0F\uFF0C\u90A3\u5C31\u662F\u76F4\u63A5\u4F7F\u7528 redis-cli \u6765\u6279\u91CF\u6267\u884C\u4E00\u7CFB\u5217\u6307\u4EE4\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ cat cmds.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">set foo1 bar1</span></span>
<span class="line"><span style="color:#A6ACCD;">set foo2 bar2</span></span>
<span class="line"><span style="color:#A6ACCD;">set foo3 bar3</span></span>
<span class="line"><span style="color:#A6ACCD;">......</span></span>
<span class="line"><span style="color:#A6ACCD;">$ cat cmds.txt | redis-cli</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E0A\u9762\u7684\u6307\u4EE4\u4F7F\u7528\u4E86 Unix \u7BA1\u9053\u5C06 cat \u6307\u4EE4\u7684\u6807\u51C6\u8F93\u51FA\u8FDE\u63A5\u5230 redis-cli \u7684\u6807\u51C6\u8F93\u5165\u3002\u5176\u5B9E\u8FD8\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u8F93\u5165\u91CD\u5B9A\u5411\u6765\u6279\u91CF\u6267\u884C\u6307\u4EE4\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli &lt; cmds.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="set-\u591A\u884C\u5B57\u7B26\u4E32" tabindex="-1">set \u591A\u884C\u5B57\u7B26\u4E32 <a class="header-anchor" href="#set-\u591A\u884C\u5B57\u7B26\u4E32" aria-hidden="true">#</a></h3><p>\u5982\u679C\u4E00\u4E2A\u5B57\u7B26\u4E32\u6709\u591A\u884C\uFF0C\u4F60\u5E0C\u671B\u5C06\u5B83\u4F20\u5165 set \u6307\u4EE4\uFF0Credis-cli \u8981\u5982\u4F55\u505A\uFF1F\u53EF\u4EE5\u4F7F\u7528 -x \u9009\u9879\uFF0C\u8BE5\u9009\u9879\u4F1A\u4F7F\u7528\u6807\u51C6\u8F93\u5165\u7684\u5185\u5BB9\u4F5C\u4E3A\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ cat str.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">Ernest Hemingway once wrote,</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;The world is a fine place and worth fighting for.&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">I agree with the second part.</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli -x set foo &lt; str.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli get foo</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;Ernest Hemingway once wrote,\\n\\&quot;The world is a fine place and worth fighting for.\\&quot;\\nI agree with the second part.\\n&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u91CD\u590D\u6267\u884C\u6307\u4EE4" tabindex="-1">\u91CD\u590D\u6267\u884C\u6307\u4EE4 <a class="header-anchor" href="#\u91CD\u590D\u6267\u884C\u6307\u4EE4" aria-hidden="true">#</a></h3><p>redis-cli \u8FD8\u652F\u6301\u91CD\u590D\u6267\u884C\u6307\u4EE4\u591A\u6B21\uFF0C\u6BCF\u6761\u6307\u4EE4\u6267\u884C\u4E4B\u95F4\u8BBE\u7F6E\u4E00\u4E2A\u95F4\u9694\u65F6\u95F4\uFF0C\u5982\u6B64\u4FBF\u53EF\u4EE5\u89C2\u5BDF\u67D0\u6761\u6307\u4EE4\u7684\u8F93\u51FA\u5185\u5BB9\u968F\u65F6\u95F4\u53D8\u5316\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">// \u95F4\u96941s\uFF0C\u6267\u884C5\u6B21\uFF0C\u89C2\u5BDFqps\u7684\u53D8\u5316</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli -r 5 -i 1 info | grep ops</span></span>
<span class="line"><span style="color:#A6ACCD;">instantaneous_ops_per_sec:43469</span></span>
<span class="line"><span style="color:#A6ACCD;">instantaneous_ops_per_sec:47460</span></span>
<span class="line"><span style="color:#A6ACCD;">instantaneous_ops_per_sec:47699</span></span>
<span class="line"><span style="color:#A6ACCD;">instantaneous_ops_per_sec:46434</span></span>
<span class="line"><span style="color:#A6ACCD;">instantaneous_ops_per_sec:47216</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5982\u679C\u5C06\u6B21\u6570\u8BBE\u7F6E\u4E3A -1 \u90A3\u5C31\u662F\u91CD\u590D\u65E0\u6570\u6B21\u6C38\u8FDC\u6267\u884C\u4E0B\u53BB\u3002\u5982\u679C\u4E0D\u63D0\u4F9B -i \u53C2\u6570\uFF0C\u90A3\u5C31\u6CA1\u6709\u95F4\u9694\uFF0C\u8FDE\u7EED\u91CD\u590D\u6267\u884C\u3002\u5728\u4EA4\u4E92\u6A21\u5F0F\u4E0B\u4E5F\u53EF\u4EE5\u91CD\u590D\u6267\u884C\u6307\u4EE4\uFF0C\u5F62\u5F0F\u4E0A\u6BD4\u8F83\u602A\u5F02\uFF0C\u5728\u6307\u4EE4\u524D\u9762\u589E\u52A0\u6B21\u6570</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">127.0.0.1:6379&gt; 5 ping</span></span>
<span class="line"><span style="color:#A6ACCD;">PONG</span></span>
<span class="line"><span style="color:#A6ACCD;">PONG</span></span>
<span class="line"><span style="color:#A6ACCD;">PONG</span></span>
<span class="line"><span style="color:#A6ACCD;">PONG</span></span>
<span class="line"><span style="color:#A6ACCD;">PONG</span></span>
<span class="line"><span style="color:#A6ACCD;"># \u4E0B\u9762\u7684\u6307\u4EE4\u5F88\u53EF\u6015\uFF0C\u4F60\u7684\u5C4F\u5E55\u8981\u6124\u6012\u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">127.0.0.1:6379&gt; 10000 info</span></span>
<span class="line"><span style="color:#A6ACCD;">.......</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u5BFC\u51FA-csv" tabindex="-1">\u5BFC\u51FA csv <a class="header-anchor" href="#\u5BFC\u51FA-csv" aria-hidden="true">#</a></h3><p>redis-cli \u4E0D\u80FD\u4E00\u6B21\u5BFC\u51FA\u6574\u4E2A\u5E93\u7684\u5185\u5BB9\u4E3A csv\uFF0C\u4F46\u662F\u53EF\u4EE5\u5BFC\u51FA\u5355\u6761\u6307\u4EE4\u7684\u8F93\u51FA\u4E3A csv \u683C\u5F0F\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli rpush lfoo a b c d e f g</span></span>
<span class="line"><span style="color:#A6ACCD;">(integer) 7</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli --csv lrange lfoo 0 -1</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;,&quot;f&quot;,&quot;g&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli hmset hfoo a 1 b 2 c 3 d 4</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli --csv hgetall hfoo</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;1&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;,&quot;d&quot;,&quot;4&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5F53\u7136\u8FD9\u79CD\u5BFC\u51FA\u529F\u80FD\u6BD4\u8F83\u5F31\uFF0C\u4EC5\u4EC5\u662F\u4E00\u5806\u5B57\u7B26\u4E32\u7528\u9017\u53F7\u5206\u5272\u5F00\u6765\u3002\u4E0D\u8FC7\u4F60\u53EF\u4EE5\u7ED3\u5408\u547D\u4EE4\u7684\u6279\u91CF\u6267\u884C\u6765\u770B\u770B\u591A\u4E2A\u6307\u4EE4\u7684\u5BFC\u51FA\u6548\u679C\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli --csv -r 5 hgetall hfoo</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;1&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;,&quot;d&quot;,&quot;4&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;1&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;,&quot;d&quot;,&quot;4&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;1&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;,&quot;d&quot;,&quot;4&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;1&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;,&quot;d&quot;,&quot;4&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;a&quot;,&quot;1&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;,&quot;d&quot;,&quot;4&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u770B\u5230\u8FD9\u91CC\u8BFB\u8005\u5E94\u8BE5\u660E\u767D --csv \u53C2\u6570\u7684\u6548\u679C\u5C31\u662F\u5BF9\u8F93\u51FA\u505A\u4E86\u4E00\u6B21\u8F6C\u6362\uFF0C\u7528\u9017\u53F7\u5206\u5272\uFF0C\u4EC5\u6B64\u800C\u5DF2\u3002</p><h3 id="\u6267\u884C-lua-\u811A\u672C" tabindex="-1">\u6267\u884C lua \u811A\u672C <a class="header-anchor" href="#\u6267\u884C-lua-\u811A\u672C" aria-hidden="true">#</a></h3><p>\u5728 lua \u811A\u672C\u5C0F\u8282\uFF0C\u6211\u4EEC\u4F7F\u7528 eval \u6307\u4EE4\u6765\u6267\u884C\u811A\u672C\u5B57\u7B26\u4E32\uFF0C\u6BCF\u6B21\u90FD\u662F\u5C06\u811A\u672C\u5185\u5BB9\u538B\u7F29\u6210\u5355\u884C\u5B57\u7B26\u4E32\u518D\u8C03\u7528 eval \u6307\u4EE4\uFF0C\u8FD9\u975E\u5E38\u7E41\u7410\uFF0C\u800C\u4E14\u53EF\u8BFB\u6027\u5F88\u5DEE\u3002redis-cli \u8003\u8651\u5230\u4E86\u8FD9\u70B9\uFF0C\u5B83\u53EF\u4EE5\u76F4\u63A5\u6267\u884C\u811A\u672C\u6587\u4EF6\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">127.0.0.1:6379&gt; eval &quot;return redis.pcall(&#39;mset&#39;, KEYS[1], ARGV[1], KEYS[2], ARGV[2])&quot; 2 foo1 foo2 bar1 bar2</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">127.0.0.1:6379&gt; eval &quot;return redis.pcall(&#39;mget&#39;, KEYS[1], KEYS[2])&quot; 2 foo1 foo2</span></span>
<span class="line"><span style="color:#A6ACCD;">1) &quot;bar1&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">2) &quot;bar2&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E0B\u9762\u6211\u4EEC\u4EE5\u811A\u672C\u7684\u5F62\u5F0F\u6765\u6267\u884C\u4E0A\u9762\u7684\u6307\u4EE4\uFF0C\u53C2\u6570\u5F62\u5F0F\u6709\u6240\u4E0D\u540C\uFF0CKEY \u548C ARGV \u4E4B\u95F4\u9700\u8981\u4F7F\u7528\u9017\u53F7\u5206\u5272\uFF0C\u5E76\u4E14\u4E0D\u9700\u8981\u63D0\u4F9B KEY \u7684\u6570\u91CF\u53C2\u6570</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ cat mset.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">return redis.pcall(&#39;mset&#39;, KEYS[1], ARGV[1], KEYS[2], ARGV[2])</span></span>
<span class="line"><span style="color:#A6ACCD;">$ cat mget.txt</span></span>
<span class="line"><span style="color:#A6ACCD;">return redis.pcall(&#39;mget&#39;, KEYS[1], KEYS[2])</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli --eval mset.txt foo1 foo2 , bar1 bar2</span></span>
<span class="line"><span style="color:#A6ACCD;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">$ redis-cli --eval mget.txt foo1 foo2</span></span>
<span class="line"><span style="color:#A6ACCD;">1) &quot;bar1&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">2) &quot;bar2&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5982\u679C\u4F60\u7684 lua \u811A\u672C\u592A\u957F\uFF0C--eval \u5C06\u5927\u6709\u7528\u5904\u3002</p><h3 id="\u76D1\u63A7\u670D\u52A1\u5668\u72B6\u6001" tabindex="-1">\u76D1\u63A7\u670D\u52A1\u5668\u72B6\u6001 <a class="header-anchor" href="#\u76D1\u63A7\u670D\u52A1\u5668\u72B6\u6001" aria-hidden="true">#</a></h3><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 --stat \u53C2\u6570\u6765\u5B9E\u65F6\u76D1\u63A7\u670D\u52A1\u5668\u7684\u72B6\u6001\uFF0C\u95F4\u9694 1s \u5B9E\u65F6\u8F93\u51FA\u4E00\u6B21\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli --stat</span></span>
<span class="line"><span style="color:#A6ACCD;">------- data ------ --------------------- load -------------------- - child -</span></span>
<span class="line"><span style="color:#A6ACCD;">keys\xA0 \xA0 \xA0 \xA0mem\xA0 \xA0 \xA0 clients blocked requests\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 connections</span></span>
<span class="line"><span style="color:#A6ACCD;">2\xA0 \xA0 \xA0 \xA0 \xA0 6.66M\xA0 \xA0 100\xA0 \xA0 \xA00\xA0 \xA0 \xA0 \xA011591628 (+0)\xA0 \xA0 \xA0 \xA0335</span></span>
<span class="line"><span style="color:#A6ACCD;">2\xA0 \xA0 \xA0 \xA0 \xA0 6.66M\xA0 \xA0 100\xA0 \xA0 \xA00\xA0 \xA0 \xA0 \xA011653169 (+61541)\xA0 \xA0335</span></span>
<span class="line"><span style="color:#A6ACCD;">2\xA0 \xA0 \xA0 \xA0 \xA0 6.66M\xA0 \xA0 100\xA0 \xA0 \xA00\xA0 \xA0 \xA0 \xA011706550 (+53381)\xA0 \xA0335</span></span>
<span class="line"><span style="color:#A6ACCD;">2\xA0 \xA0 \xA0 \xA0 \xA0 6.54M\xA0 \xA0 100\xA0 \xA0 \xA00\xA0 \xA0 \xA0 \xA011758831 (+52281)\xA0 \xA0335</span></span>
<span class="line"><span style="color:#A6ACCD;">2\xA0 \xA0 \xA0 \xA0 \xA0 6.66M\xA0 \xA0 100\xA0 \xA0 \xA00\xA0 \xA0 \xA0 \xA011803132 (+44301)\xA0 \xA0335</span></span>
<span class="line"><span style="color:#A6ACCD;">2\xA0 \xA0 \xA0 \xA0 \xA0 6.66M\xA0 \xA0 100\xA0 \xA0 \xA00\xA0 \xA0 \xA0 \xA011854183 (+51051)\xA0 \xA0335</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5982\u679C\u4F60\u89C9\u5F97\u95F4\u9694\u592A\u957F\u6216\u662F\u592A\u77ED\uFF0C\u53EF\u4EE5\u4F7F\u7528 -i \u53C2\u6570\u8C03\u6574\u8F93\u51FA\u95F4\u9694\u3002</p><h3 id="\u626B\u63CF\u5927-key" tabindex="-1">\u626B\u63CF\u5927 KEY <a class="header-anchor" href="#\u626B\u63CF\u5927-key" aria-hidden="true">#</a></h3><p>\u8FD9\u4E2A\u529F\u80FD\u592A\u5B9E\u7528\u4E86\uFF0C\u6211\u5DF2\u7ECF\u5728\u7EBF\u4E0A\u8BD5\u8FC7\u65E0\u6570\u6B21\u4E86\u3002\u6BCF\u6B21\u9047\u5230 Redis \u5076\u7136\u5361\u987F\u95EE\u9898\uFF0C\u7B2C\u4E00\u4E2A\u60F3\u5230\u7684\u5C31\u662F\u5B9E\u4F8B\u4E2D\u662F\u5426\u5B58\u5728\u5927 KEY\uFF0C\u5927 KEY\u7684\u5185\u5B58\u6269\u5BB9\u4EE5\u53CA\u91CA\u653E\u90FD\u4F1A\u5BFC\u81F4\u4E3B\u7EBF\u7A0B\u5361\u987F\u3002\u5982\u679C\u77E5\u9053\u91CC\u9762\u6709\u6CA1\u6709\u5927 KEY\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5199\u7A0B\u5E8F\u626B\u63CF\uFF0C\u4E0D\u8FC7\u8FD9\u592A\u7E41\u7410\u4E86\u3002redis-cli \u63D0\u4F9B\u4E86 --bigkeys \u53C2\u6570\u53EF\u4EE5\u5F88\u5FEB\u626B\u51FA\u5185\u5B58\u91CC\u7684\u5927 KEY\uFF0C\u4F7F\u7528 -i \u53C2\u6570\u63A7\u5236\u626B\u63CF\u95F4\u9694\uFF0C\u907F\u514D\u626B\u63CF\u6307\u4EE4\u5BFC\u81F4\u670D\u52A1\u5668\u7684 ops \u9661\u589E\u62A5\u8B66\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ ./redis-cli --bigkeys -i 0.01</span></span>
<span class="line"><span style="color:#A6ACCD;"># Scanning the entire keyspace to find biggest keys as well as</span></span>
<span class="line"><span style="color:#A6ACCD;"># average sizes per key type.\xA0 You can use -i 0.1 to sleep 0.1 sec</span></span>
<span class="line"><span style="color:#A6ACCD;"># per 100 SCAN commands (not usually needed).</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">[00.00%] Biggest zset\xA0 \xA0found so far &#39;hist:aht:main:async_finish:20180425:17&#39; with 1440 members</span></span>
<span class="line"><span style="color:#A6ACCD;">[00.00%] Biggest zset\xA0 \xA0found so far &#39;hist:qps:async:authorize:20170311:27&#39; with 2465 members</span></span>
<span class="line"><span style="color:#A6ACCD;">[00.00%] Biggest hash\xA0 \xA0found so far &#39;job:counters:6ya9ypu6ckcl&#39; with 3 fields</span></span>
<span class="line"><span style="color:#A6ACCD;">[00.01%] Biggest string found so far &#39;rt:aht:main:device_online:68:{-4}&#39; with 4 bytes</span></span>
<span class="line"><span style="color:#A6ACCD;">[00.01%] Biggest zset\xA0 \xA0found so far &#39;machine:load:20180709&#39; with 2879 members</span></span>
<span class="line"><span style="color:#A6ACCD;">[00.02%] Biggest string found so far &#39;6y6fze8kj7cy:{-7}&#39; with 90 bytes</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>redis-cli \u5BF9\u4E8E\u6BCF\u4E00\u79CD\u5BF9\u8C61\u7C7B\u578B\u90FD\u4F1A\u8BB0\u5F55\u957F\u5EA6\u6700\u5927\u7684 KEY\uFF0C\u5BF9\u4E8E\u6BCF\u4E00\u79CD\u5BF9\u8C61\u7C7B\u578B\uFF0C\u5237\u65B0\u4E00\u6B21\u6700\u9AD8\u8BB0\u5F55\u5C31\u4F1A\u7ACB\u5373\u8F93\u51FA\u4E00\u6B21\u3002\u5B83\u80FD\u4FDD\u8BC1\u8F93\u51FA\u957F\u5EA6\u4E3A Top1 \u7684 KEY\uFF0C\u4F46\u662F Top2\u3001Top3\u7B49 KEY \u662F\u65E0\u6CD5\u4FDD\u8BC1\u53EF\u4EE5\u626B\u63CF\u51FA\u6765\u7684\u3002\u4E00\u822C\u7684\u5904\u7406\u65B9\u6CD5\u662F\u591A\u626B\u63CF\u51E0\u6B21\uFF0C\u6216\u8005\u662F\u6D88\u706D\u4E86 Top1 \u7684 KEY \u4E4B\u540E\u518D\u626B\u63CF\u786E\u8BA4\u8FD8\u6709\u6CA1\u6709\u6B21\u5927\u7684 KEY\u3002</p><h3 id="\u91C7\u6837\u670D\u52A1\u5668\u6307\u4EE4" tabindex="-1">\u91C7\u6837\u670D\u52A1\u5668\u6307\u4EE4 <a class="header-anchor" href="#\u91C7\u6837\u670D\u52A1\u5668\u6307\u4EE4" aria-hidden="true">#</a></h3><p>\u73B0\u5728\u7EBF\u4E0A\u6709\u4E00\u53F0 Redis \u670D\u52A1\u5668\u7684 OPS \u592A\u9AD8\uFF0C\u6709\u5F88\u591A\u4E1A\u52A1\u6A21\u5757\u90FD\u5728\u4F7F\u7528\u8FD9\u4E2A Redis\uFF0C\u5982\u4F55\u624D\u80FD\u5224\u65AD\u51FA\u6765\u662F\u54EA\u4E2A\u4E1A\u52A1\u5BFC\u81F4\u4E86 OPS \u5F02\u5E38\u7684\u9AD8\u3002\u8FD9\u65F6\u53EF\u4EE5\u5BF9\u7EBF\u4E0A\u670D\u52A1\u5668\u7684\u6307\u4EE4\u8FDB\u884C\u91C7\u6837\uFF0C\u89C2\u5BDF\u91C7\u6837\u7684\u6307\u4EE4\u5927\u81F4\u5C31\u53EF\u4EE5\u5206\u6790\u51FA OPS \u5360\u6BD4\u9AD8\u7684\u4E1A\u52A1\u70B9\u3002\u8FD9\u65F6\u5C31\u8981\u4F7F\u7528 monitor \u6307\u4EE4\uFF0C\u5B83\u4F1A\u5C06\u670D\u52A1\u5668\u77AC\u95F4\u6267\u884C\u7684\u6307\u4EE4\u5168\u90E8\u663E\u793A\u51FA\u6765\u3002\u4E0D\u8FC7\u4F7F\u7528\u7684\u65F6\u5019\u8981\u6CE8\u610F\u5373\u4F7F\u4F7F\u7528 ctrl+c \u4E2D\u65AD\uFF0C\u5426\u5219\u4F60\u7684\u663E\u793A\u5668\u4F1A\u567C\u91CC\u556A\u5566\u592A\u591A\u7684\u6307\u4EE4\u77AC\u95F4\u8BA9\u4F60\u773C\u82B1\u7F2D\u4E71\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli --host 192.168.x.x --port 6379 monitor</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.458483 [0 10.100.90.62:34365] &quot;GET&quot; &quot;6yax3eb6etq8:{-7}&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.459212 [0 10.100.90.61:56659] &quot;PFADD&quot; &quot;growth:dau:20181018&quot; &quot;2klxkimass8w&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.462938 [0 10.100.90.62:20681] &quot;GET&quot; &quot;6yax3eb6etq8:{-7}&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.467231 [0 10.100.90.61:40277] &quot;PFADD&quot; &quot;growth:dau:20181018&quot; &quot;2kei0to86ps1&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.470319 [0 10.100.90.62:34365] &quot;GET&quot; &quot;6yax3eb6etq8:{-7}&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.473927 [0 10.100.90.61:58128] &quot;GET&quot; &quot;6yax3eb6etq8:{-7}&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.475712 [0 10.100.90.61:40277] &quot;PFADD&quot; &quot;growth:dau:20181018&quot; &quot;2km8sqhlefpc&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">1539853410.477053 [0 10.100.90.62:61292] &quot;GET&quot; &quot;6yax3eb6etq8:{-7}&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u8BCA\u65AD\u670D\u52A1\u5668\u65F6\u5EF6" tabindex="-1">\u8BCA\u65AD\u670D\u52A1\u5668\u65F6\u5EF6 <a class="header-anchor" href="#\u8BCA\u65AD\u670D\u52A1\u5668\u65F6\u5EF6" aria-hidden="true">#</a></h3><p>\u5E73\u65F6\u6211\u4EEC\u8BCA\u65AD\u4E24\u53F0\u673A\u5668\u7684\u65F6\u5EF6\u4E00\u822C\u662F\u4F7F\u7528 Unix \u7684 ping \u6307\u4EE4\u3002Redis \u4E5F\u63D0\u4F9B\u4E86\u65F6\u5EF6\u8BCA\u65AD\u6307\u4EE4\uFF0C\u4E0D\u8FC7\u5B83\u7684\u539F\u7406\u4E0D\u592A\u4E00\u6837\uFF0C\u5B83\u662F\u8BCA\u65AD\u5F53\u524D\u673A\u5668\u548C Redis \u670D\u52A1\u5668\u4E4B\u95F4\u7684\u6307\u4EE4(PING\u6307\u4EE4)\u65F6\u5EF6\uFF0C\u5B83\u4E0D\u4EC5\u4EC5\u662F\u7269\u7406\u7F51\u7EDC\u7684\u65F6\u5EF6\uFF0C\u8FD8\u548C\u5F53\u524D\u7684 Redis \u4E3B\u7EBF\u7A0B\u662F\u5426\u5FD9\u788C\u6709\u5173\u3002\u5982\u679C\u4F60\u53D1\u73B0 Unix \u7684 ping \u6307\u4EE4\u65F6\u5EF6\u5F88\u5C0F\uFF0C\u800C Redis \u7684\u65F6\u5EF6\u5F88\u5927\uFF0C\u90A3\u8BF4\u660E Redis \u670D\u52A1\u5668\u5728\u6267\u884C\u6307\u4EE4\u65F6\u6709\u5FAE\u5F31\u5361\u987F\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli --host 192.168.x.x --port 6379 --latency</span></span>
<span class="line"><span style="color:#A6ACCD;">min: 0, max: 5, avg: 0.08 (305 samples)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u65F6\u5EF6\u5355\u4F4D\u662F ms\u3002redis-cli \u8FD8\u80FD\u663E\u793A\u65F6\u5EF6\u7684\u5206\u5E03\u60C5\u51B5\uFF0C\u800C\u4E14\u662F\u56FE\u5F62\u5316\u8F93\u51FA\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ redis-cli --latency-dist</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a3cac25bdb6fb~tplv-t2oaga2asx-image.image" alt=""></p><p>\u8FD9\u4E2A\u56FE\u5F62\u7684\u542B\u4E49\u4F5C\u8005\u6CA1\u6709\u63CF\u8FF0\uFF0C\u8BFB\u8005\u4EEC\u53EF\u4EE5\u5C1D\u8BD5\u7834\u89E3\u4E00\u4E0B\u3002</p><h3 id="\u8FDC\u7A0B-rdb-\u5907\u4EFD" tabindex="-1">\u8FDC\u7A0B rdb \u5907\u4EFD <a class="header-anchor" href="#\u8FDC\u7A0B-rdb-\u5907\u4EFD" aria-hidden="true">#</a></h3><p>\u6267\u884C\u4E0B\u9762\u7684\u547D\u4EE4\u5C31\u53EF\u4EE5\u5C06\u8FDC\u7A0B\u7684 Redis \u5B9E\u4F8B\u5907\u4EFD\u5230\u672C\u5730\u673A\u5668\uFF0C\u8FDC\u7A0B\u670D\u52A1\u5668\u4F1A\u6267\u884C\u4E00\u6B21bgsave\u64CD\u4F5C\uFF0C\u7136\u540E\u5C06 rdb \u6587\u4EF6\u4F20\u8F93\u5230\u5BA2\u6237\u7AEF\u3002\u8FDC\u7A0B rdb \u5907\u4EFD\u8BA9\u6211\u4EEC\u6709\u4E00\u79CD\u201C\u79C0\u624D\u4E0D\u51FA\u95E8\uFF0C\u5168\u77E5\u5929\u4E0B\u4E8B\u201D\u7684\u611F\u89C9\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ ./redis-cli --host 192.168.x.x --port 6379 --rdb ./user.rdb</span></span>
<span class="line"><span style="color:#A6ACCD;">SYNC sent to master, writing 2501265095 bytes to &#39;./user.rdb&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Transfer finished with success.</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u6A21\u62DF\u4ECE\u5E93" tabindex="-1">\u6A21\u62DF\u4ECE\u5E93 <a class="header-anchor" href="#\u6A21\u62DF\u4ECE\u5E93" aria-hidden="true">#</a></h3><p>\u5982\u679C\u4F60\u60F3\u89C2\u5BDF\u4E3B\u4ECE\u670D\u52A1\u5668\u4E4B\u95F4\u90FD\u540C\u6B65\u4E86\u90A3\u4E9B\u6570\u636E\uFF0C\u53EF\u4EE5\u4F7F\u7528 redis-cli \u6A21\u62DF\u4ECE\u5E93\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ ./redis-cli --host 192.168.x.x --port 6379 --slave</span></span>
<span class="line"><span style="color:#A6ACCD;">SYNC with master, discarding 51778306 bytes of bulk transfer...</span></span>
<span class="line"><span style="color:#A6ACCD;">SYNC done. Logging commands from master.</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4ECE\u5E93\u8FDE\u4E0A\u4E3B\u5E93\u7684\u7B2C\u4E00\u4EF6\u4E8B\u662F\u5168\u91CF\u540C\u6B65\uFF0C\u6240\u4EE5\u770B\u5230\u4E0A\u9762\u7684\u6307\u4EE4\u5361\u987F\u8FD9\u5F88\u6B63\u5E38\uFF0C\u5F85\u9996\u6B21\u5168\u91CF\u540C\u6B65\u5B8C\u6210\u540E\uFF0C\u5C31\u4F1A\u8F93\u51FA\u589E\u91CF\u7684 aof \u65E5\u5FD7\u3002</p>`,60),o=[p];function t(c,i,r,u,A,d){return n(),a("div",null,o)}const q=s(e,[["render",t]]);export{y as __pageData,q as default};
